---
import type { Stats as Props } from "@/types.d.ts";
import ComponentWrapper from "@/components/blocks/ComponentWrapper.astro";
import Headline from "@/components/ui-astro/Headline.astro";
import DynamicIcon from "@/components/blocks/DynamicIcon.tsx";

const {
  title = await Astro.slots.render("title"),
  subtitle = await Astro.slots.render("subtitle"),
  tagline,
  stats = [],
  flatBackground,

  id,
  classes = {},
} = Astro.props;
---

<ComponentWrapper
  id={id}
  flatBackground={flatBackground}
  containerClass={`max-w-5xl mx-auto lg:pt-4 ${classes?.container ?? ""}`}
>
  <slot name="bg" slot="bg" />
  <Headline title={title} subtitle={subtitle} tagline={tagline} />
  <div
    class="grid grid-cols-2 gap-x-8 gap-y-0 lg:grid-cols-4 lg:gap-x-0 lg:gap-y-8"
  >
    {
      stats &&
        stats.map(({ amount, title, icon }) => (
          <div
            class:list={[
              "intersect-once motion-safe:md:intersect:animate-fade-in intersect-quarter transition-none motion-safe:md:opacity-0",
              "p-4",
              "border-primary border-b last:border-b-0 [&:nth-last-child(2)]:border-b-0",
              "lg:border-b-0 lg:border-l lg:nth-[4n+1]:border-none",
              "flex flex-col justify-center text-center",
            ]}
          >
            {icon && (
              <div
                class:list={[
                  "prose dark:prose-invert mx-auto mb-4 flex items-center justify-center",
                ]}
              >
                <DynamicIcon icon={icon} className="h-10 w-10" />
              </div>
            )}
            {amount && (
              <div
                class:list={[
                  "prose dark:prose-invert mx-auto text-[2.6rem] font-bold lg:text-5xl xl:text-6xl",
                ]}
              >
                {amount}
              </div>
            )}
            {title && (
              <div class="prose dark:prose-invert mx-auto flex flex-wrap text-sm font-medium tracking-widest uppercase">
                {title}
              </div>
            )}
          </div>
        ))
    }
  </div>
</ComponentWrapper>
