---
import config from "@/config.json";

import { Image } from "astro:assets";

import { cn } from "@/lib/utils.ts";

import Social from "@/components/blocks/Social.astro";
import Button from "@/components/ui-astro/Button.astro";

// Properties
const { people_folder }: { people_folder: string } = config.settings;

const { data, className } = Astro.props;
const { name, responsibility, description, image, social } = data.data;
const patternId = `pattern-${data.id}`;
---

<article
  class={cn(
    "group hover:border-primary bg-background relative isolate grid grid-cols-1 gap-6 overflow-hidden rounded-xl border-2 p-6 hover:[box-shadow:_var(--sh-alt)] hover:-translate-y-3 transition-transform duration-100",
    className,
  )}
>
  <svg
    class="text-primary pointer-events-none invisible absolute inset-0 z-[-1] size-full [mask-image:linear-gradient(to_left,_#ffffffad,_transparent)] opacity-100 select-none group-hover:visible dark:opacity-80"
  >
    <defs>
      <pattern
        id={patternId}
        width="4"
        height="4"
        patternUnits="userSpaceOnUse"
        patternTransform="rotate(45)"
      >
        <line
          x1="0"
          y1="0"
          x2="0"
          y2="4"
          stroke="currentColor"
          stroke-width="1.5"></line>
      </pattern>
    </defs>
    <rect width="100%" height="100%" fill={`url(#${patternId})`}></rect>
  </svg>

  {
    image && (
      <a
        class="relative h-72 overflow-hidden rounded-lg md:h-64"
        href={`/${people_folder}/${data.id}`}
      >
        <Image
          class="size-full object-cover"
          src={image.src}
          alt={name}
          width={445}
          height={230}
          format="webp"
        />
      </a>
    )
  }

  <div class="flex flex-col justify-between text-left">
    <div>
      <header class="mb-2">
        <h2 class="group-hover:text-primary text-xl font-bold">
          <a href={`/${people_folder}/${data.id}`} class="inline-block">
            <span>{name}</span>
          </a>
        </h2>
        <h3 class="mt-1 text-sm font-light">
          {responsibility}
        </h3>
      </header>

      <div class="border-t pt-2">
        <p class="mt-2 mb-4 line-clamp-3">{description}</p>
      </div>
      <Social socialLinks={social} />
    </div>

    <Button
      variant="default"
      href={`/${people_folder}/${data.id}`}
      className="bg-primary/60 dark:bg-primary dark:hover:bg-primary/60 mt-4"
    >
      View Profile
    </Button>
  </div>
</article>
