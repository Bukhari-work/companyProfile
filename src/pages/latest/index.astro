---
import Main from "@/layouts/Main.astro";
import PageHeader from "@/components/blocks/PageHeader.astro";
import DynamicIcon from "@/components/blocks/DynamicIcon.tsx";
import { slugify } from "@/lib/utils/textConverter";
import Button from "@/components/ui-astro/Button.astro"; // <-- Import the Button component

// Content for SEO and Header
const content = {
  title: "Latest Workshops",
  description: "Browse our upcoming workshops and training events.",
};

// Data for workshop cards
const workshops = [
  {
    title: "Workshop on Global Health Leadership and Diplomacy",
    description:
      "This foundational workshop equips you with essential skills in negotiation, diplomacy, and leadership to effectively influence global health policy.",
    date: "30 October 2025",
    location: "Universitas Diponegoro, Semarang",
    url: "/latest/ghld",
  },
  {
    title: "Workshop Analisis Data SEM-PLS untuk Kebijakan Kesehatan",
    description:
      "Workshop ini dirancang untuk mengembangkan keterampilan peserta dalam menganalisis data menggunakan perangkat lunak SmartPLS, yang memungkinkan pengembangan kebijakan kesehatan berbasis bukti dengan lebih baik.",
    date: "30 Oktober 2025",
    location: "FKM Universitas Diponegoro, Semarang",
    url: "/latest/sempls",
  },
  {
    title: "Workshop Literasi AI Data Sampel BPJS Kesehatan",
    description:
      "Workshop ini dirancang untuk memperkenalkan peserta pada konsep dasar literasi AI, teknik pengolahan data sampel BPJS Kesehatan, serta strategi menyusun publikasi ilmiah yang relevan.",
    date: "30 Oktober 2025",
    location: "Universitas Diponegoro, Semarang",
    url: "/latest/ai",
  },
];
---

<Main {content}>
  <PageHeader title={content.title} breadcrumbs={false} />
  <section class="mx-auto max-w-7xl p-4 pb-24">
    <div class="grid grid-cols-1 gap-8 md:grid-cols-2">
      {
        workshops.map((workshop) => {
          const patternId = `pattern-${slugify(workshop.title)}`;
          return (
            <div class="group hover:border-primary bg-background relative isolate flex flex-col gap-6 overflow-hidden rounded-xl border-2 p-8 hover:[box-shadow:_var(--sh-alt)]">
              {/* SVG background pattern from NewsCard */}
              <svg
                class="text-primary pointer-events-none invisible absolute inset-0 z-[-1] size-full [mask-image:linear-gradient(to_left,_#ffffffad,_transparent)] opacity-100 select-none group-hover:visible dark:opacity-80"
                aria-hidden="true"
              >
                <defs>
                  <pattern
                    id={patternId}
                    width="4"
                    height="4"
                    patternUnits="userSpaceOnUse"
                    patternTransform="rotate(45)"
                  >
                    <line
                      x1="0"
                      y1="0"
                      x2="0"
                      y2="4"
                      stroke="currentColor"
                      stroke-width="1.5"
                    />
                  </pattern>
                </defs>
                <rect width="100%" height="100%" fill={`url(#${patternId})`} />
              </svg>

              {/* Card Content */}
              <div class="flex h-full flex-col justify-between">
                <section>
                  <header>
                    <a href={workshop.url}>
                      <h2 class="group-hover:text-primary mb-2 text-2xl font-bold">
                        {workshop.title}
                      </h2>
                    </a>
                  </header>
                  <p class="mt-3">{workshop.description}</p>
                </section>

                <footer class="mt-6 border-t pt-6">
                  <div class="flex flex-col gap-3 text-sm">
                    <div class="flex items-center gap-3">
                      <DynamicIcon
                        icon="LuCalendar"
                        className="size-5 flex-shrink-0 text-primary"
                      />
                      <span class="font-mono">{workshop.date}</span>
                    </div>
                    <div class="flex items-center gap-3">
                      <DynamicIcon
                        icon="LuMapPin"
                        className="size-5 flex-shrink-0 text-primary"
                      />
                      <span class="font-mono">{workshop.location}</span>
                    </div>
                  </div>
                  <div class="mt-6">
                    {/* Replaced span with Button component */}
                    <Button
                      variant="default"
                      href={workshop.url}
                      className="bg-primary/60 dark:bg-primary dark:hover:bg-primary/60"
                    >
                      Learn More
                    </Button>
                  </div>
                </footer>
              </div>
            </div>
          );
        })
      }
    </div>
  </section>
</Main>
