---
import Logo from "@/layouts/Logo.astro";
import ThemeToggle from "@/components/ThemeToggle.astro";
import config from "@/config.json";
import { cn } from "@/lib/utils";
import { MenuDrawer } from "@/components/MenuDrawer.tsx";
import { Button } from "@/components/ui/button.tsx";
import { ChevronRight } from "lucide-react";

export interface ChildNavigationLink {
  name: string;
  url: string;
}

export interface NavigationLink {
  name: string;
  url: string;
  hasChildren?: boolean;
  children?: ChildNavigationLink[];
}
const { main }: { main: NavigationLink[] } = config.menu;
const { pathname } = Astro.url;
---

<header class="sticky top-0 z-50">
  <div
    class="dark:bg-ungu mx-auto flex flex-wrap items-center justify-evenly bg-white px-4 py-4 shadow-sm md:py-4 lg:py-3"
  >
    <Logo loading="eager" />
    <nav class="flex items-center justify-between lg:text-sm">
      <ul
        class="order-3 hidden w-full py-4 text-center lg:order-1 lg:flex lg:w-auto lg:space-x-2 lg:py-0 xl:space-x-8"
      >
        {
          main.map((menu) => (
            <li class="nav-item">
              <a
                href={menu.url}
                class={`group relative block p-3 transition-all duration-300 lg:px-2 lg:py-3 ${
                  (pathname === `${menu.url}/` || pathname === menu.url) &&
                  "text-ungu dark:text-kuning"
                }`}
              >
                {menu.name}
                <span
                  class={cn(
                    `bg-primary absolute bottom-1 left-0 h-0.5 w-full origin-bottom-left scale-x-0 transform transition-transform duration-200 ease-out group-hover:scale-x-100 ${
                      (pathname === `${menu.url}/` || pathname === menu.url) &&
                      "bg-ungu dark:bg-kuning scale-x-100"
                    }`,
                  )}
                />
              </a>
            </li>
          ))
        }
      </ul>
    </nav>
    <ThemeToggle />
    <nav>
      <MenuDrawer client:load>
        <a href="/" slot="home">
          <Button variant="ghost" className="group flex w-full justify-between"
            >Homepage
            <ChevronRight />
          </Button>
        </a>
        {
          main.map((menu) => (
            <a href={menu.url}>
              <Button
                variant="ghost"
                className="w-full group flex justify-between"
              >
                {menu.name}
                <ChevronRight />
              </Button>
            </a>
          ))
        }
      </MenuDrawer>
    </nav>
  </div>
</header>
